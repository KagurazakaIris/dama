# Dama Desktop 用户手册

## 简介

Dama Desktop 是一款剪贴板隐私保护工具。当你截图或复制包含敏感信息（身份证号、手机号、银行卡号、IP地址等）的图片时，Dama 会自动识别并提供打码功能，防止隐私泄露。

所有处理均在本地完成，不会上传任何数据。

## 安装

从 [GitHub Releases](https://github.com/KagurazakaIris/dama/releases) 下载对应平台的安装包：

- **Windows**: `.zip` 文件，解压后运行 `dama-desktop.exe`
- **Linux (Debian/Ubuntu)**: `.deb` 文件，`sudo dpkg -i dama-desktop_*.deb`
- **Linux (Fedora/openSUSE)**: `.rpm` 文件，`sudo rpm -i dama-desktop_*.rpm`
- **macOS**: `.zip` 文件，解压后拖入 Applications

## 首次启动

1. 启动后，应用会在系统托盘（任务栏通知区域）显示图标
2. 首次处理图片时，会自动下载 OCR 模型文件（约 16MB），需要网络连接
3. 模型下载完成后即可正常使用，后续启动无需联网

## 基本使用流程

### 1. 复制图片

正常截图或复制任意包含文字的图片。

### 2. 拦截弹窗

复制图片后，屏幕右下角会弹出小窗口：

- **自动打码** — 进入 OCR 识别和打码流程
- **跳过** — 忽略本次图片
- 10 秒内无操作则自动跳过

### 3. 预览编辑

点击"自动打码"后，OCR 识别完成后会弹出预览窗口：

**画布区域（中间）**：
- 显示原图，自动检测到的敏感区域用彩色方框标记
- 蓝色方框 = 自动检测
- 橙色方框 = 手动添加
- 滚轮缩放，按住中键拖拽平移

**手动添加打码区域**：
- 直接在画布上拖拽绘制矩形框
- 适合 OCR 未能自动识别的区域

**区域列表（右侧）**：
- 勾选/取消勾选可启用或禁用单个区域
- 点击列表项可定位到对应区域
- 支持全选/全不选

**撤销/重做**：
- `Ctrl+Z` 撤销
- `Ctrl+Shift+Z` 重做

### 4. 保存结果

- **应用到剪贴板** — 打码后的图片替换剪贴板内容，直接粘贴即可
- **另存为** — 保存为 PNG 文件
- **取消** — 放弃本次操作

## 设置

右键点击系统托盘图标 → 设置，可配置：

| 选项 | 说明 |
|------|------|
| 启用监控 | 开关剪贴板监控 |
| 自动处理 | 跳过拦截弹窗，直接进入预览 |
| 敏感信息类型 | 分别开关各类检测（身份证、银行卡、手机号、邮箱、IP地址、护照号、车牌号） |

## 支持检测的敏感信息

| 类型 | 示例 |
|------|------|
| 身份证号（18位） | 110101199001011234 |
| 银行卡号 | 6222 0200 1234 5678 |
| 手机号 | 13812345678 |
| 电子邮箱 | user@example.com |
| IP地址 | 192.168.1.1 |
| 护照号 | G12345678 |
| 车牌号 | 京A12345 |

## 打码方式

采用**纯黑色填充**覆盖敏感区域。相比传统马赛克（像素化）或高斯模糊，纯黑填充不可逆，无法通过 AI 算法还原原始内容。

## 数据安全

- 所有 OCR 识别和图像处理均在本地完成
- 不联网发送任何图片或文字数据
- 仅首次使用时下载模型文件
- 设置文件存储在本地用户目录中

## 常见问题

**Q: 第一次使用时提示下载模型？**
A: 正常现象。OCR 模型约 16MB，下载完成后缓存在本地，后续无需重复下载。

**Q: 某些文字没有被自动识别？**
A: 可以在预览窗口手动框选遗漏区域。OCR 对低分辨率、特殊字体、手写文字的识别率可能较低。

**Q: 为什么用黑色填充而不是马赛克？**
A: 马赛克和模糊处理可被 AI 模型逆向还原，黑色填充是不可逆的，安全性更高。

**Q: 托盘图标不见了？**
A: 部分 Linux 桌面环境需要安装系统托盘扩展（如 GNOME 需要 AppIndicator 扩展）。

**Q: 如何退出？**
A: 右键点击系统托盘图标 → 退出。
